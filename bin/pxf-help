#!/usr/bin/env ruby
# frozen_string_literal: true

def help(short)
  puts('usage: pxf help COMMAND', nil) unless short
  puts('Print help for given COMMAND.')
  exit
end

def err(msg)
  $stderr.puts("pxf: #{msg}")
  exit(1)
end

help(false) if ARGV[0] == '--help'
help(true) if ARGV[0] == '--short-help'
root = File.realdirpath('../', __FILE__).freeze
exec(File.join(root, 'pxf')) if ARGV.empty?
ARGV.each do |cmd|
  fname = File.join(root, 'pxf-' + cmd)
  err("no such command - #{cmd}") unless File.executable?(fname)
  system(fname, '--help')
end
